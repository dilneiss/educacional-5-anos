<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo Educativo Infantil</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive;
            background-color: #FFF3E0;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
        }
        .game-mode {
            background-color: #81D4FA;
            border-radius: 20px;
            padding: 20px;
            margin: 15px;
            cursor: pointer;
            font-size: 28px;
            color: #000;
            transition: transform 0.2s;
        }
        .game-mode:hover {
            transform: scale(1.05);
        }
        .number-option, .emoji-option {
            background-color: #C8E6C9;
            width: 120px;
            height: 120px;
            margin: 10px;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border-radius: 15px;
            cursor: pointer;
            border: 3px solid #000;
        }
        .emoji-name {
            font-size: 14px;
            margin-top: 5px;
        }
        .target-display {
            font-size: 80px;
            margin: 20px;
            padding: 20px;
            background-color: #FFF9C4;
            border-radius: 15px;
            display: inline-block;
        }
        .feedback {
            font-size: 40px;
            margin: 20px;
            min-height: 60px;
        }
        .emoji-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px;
        }
        button {
            font-size: 24px;
            padding: 15px 30px;
            margin: 15px;
            border-radius: 15px;
            background-color: #4CAF50;
            border: none;
            color: white;
            cursor: pointer;
        }
        .stars-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .player-name {
            font-size: 24px;
            color: #2E7D32;
            font-weight: bold;
        }
        .word-letter {
            background-color: #FFD700;
            width: 60px;
            height: 60px;
            margin: 5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid #000;
        }

        .word-target {
            font-size: 40px;
            margin: 20px;
            color: #888;
            opacity: 0.7;
        }

        .word-container {
            min-height: 100px;
            margin: 20px;
        }

        .correct-word {
            color: #2E7D32 !important;
            opacity: 1 !important;
        }

        .letter-box {
            display: inline-block;
            width: 40px;
            height: 40px;
            margin: 5px;
            font-size: 24px;
            color: #666;
            border-bottom: 3px solid #999;
        }

        .revealed {
            color: #2E7D32 !important;
            border-bottom: 3px solid #2E7D32;
        }

        .scrambled-letters {
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üéÆ Vamos Aprender! üåà</h1>
        
        <div id="main-menu">
            <div class="game-mode" onclick="startGame('numbers')">üî¢ Encontrar N√∫meros</div>
            <div class="game-mode" onclick="startGame('letters')">üî§ Letras e Emojis</div>
            <div class="game-mode" onclick="startGame('counting')">üçé Contar Emojis</div>
            <div class="game-mode" onclick="startGame('word')">üî§ Montar Palavras</div>
        </div>

        <div id="game-area" style="display: none;">
            <div id="content"></div>
            <div id="feedback" class="feedback"></div>
            <button onclick="showMainMenu()">Voltar ao Menu</button>
        </div>
    </div>

    <div class="stars-container" id="stars">
        <span class="player-name" id="player-name"></span>
        <div>‚≠ê <span id="stars-count">0</span></div>
    </div>

    <script>
        // Sistema de nome do jogador - Sempre pede ao recarregar
        localStorage.removeItem('playerName');
        localStorage.removeItem('stars');

        let playerName = prompt('Qual √© o seu nome?', 'Amiguinho').trim();
        document.getElementById('player-name').textContent = playerName;

        // Sistema de estrelas - Sempre come√ßa do zero
        let stars = 0;
        let previousStars = 0;
        document.getElementById('stars-count').textContent = stars;

        const numbers = Array.from({length: 20}, (_, i) => i + 1);
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        
        const emojiDatabase = {
    "A": [
        {"emoji": "‚úàÔ∏è", "nome": "Avi√£o"},
        {"emoji": "üå≥", "nome": "√Årvore"},
        {"emoji": "üé®", "nome": "Arte"},
        {"emoji": "üèπ", "nome": "Arco e Flecha"},
        {"emoji": "üêú", "nome": "Aranha"},
        {"emoji": "‚öì", "nome": "√Çncora"},
        {"emoji": "üé≠", "nome": "Ator"},
        {"emoji": "üöë", "nome": "Ambul√¢ncia"},
        {"emoji": "üåà", "nome": "Arco-√≠ris"},
        {"emoji": "üçö", "nome": "Arroz"}
    ],
    "B": [
        {"emoji": "üéà", "nome": "Bal√£o"},
        {"emoji": "üö≤", "nome": "Bicicleta"},
        {"emoji": "üçå", "nome": "Banana"},
        {"emoji": "üîã", "nome": "Bateria"},
        {"emoji": "üèÄ", "nome": "Basquete"},
        {"emoji": "üêù", "nome": "Abelha"},
        {"emoji": "üçü", "nome": "Batata Frita"},
        {"emoji": "‚öñ", "nome": "Balan√ßa"},
        {"emoji": "üçÜ", "nome": "Berinjela"},
        {"emoji": "‚öΩ", "nome": "Bola"}
    ],
    "C": [
        {"emoji": "üè°", "nome": "Casa"},
        {"emoji": "üè∞", "nome": "Castelo"},
        {"emoji": "üèôÔ∏è", "nome": "Cidade"},
        {"emoji": "üêç", "nome": "Cobra"},
        {"emoji": "üê∂", "nome": "Cachorro"},
        {"emoji": "‚òï", "nome": "Caf√©"},
        {"emoji": "üçµ", "nome": "Ch√°"},
        {"emoji": "üöó", "nome": "Carro"},
        {"emoji": "üé†", "nome": "Carrossel"},
        {"emoji": "ü¶å", "nome": "Cervo"},
        {"emoji": "ü•ï", "nome": "Cenoura"},
        {"emoji": "üîë", "nome": "Chave"},
        {"emoji": "ü¶â", "nome": "Coruja"},
        {"emoji": "üèÉ", "nome": "Corrida"}
    ],
    "D": [
        {"emoji": "üé≤", "nome": "Dado"},
        {"emoji": "üêâ", "nome": "Drag√£o"},
        {"emoji": "üíé", "nome": "Diamante"},
        {"emoji": "üéØ", "nome": "Dardo"},
        {"emoji": "üìÖ", "nome": "Data"},        
    ],
    "E": [
        {"emoji": "‚≠ê", "nome": "Estrela"},
        {"emoji": "üìß", "nome": "E-mail"},
        {"emoji": "üêò", "nome": "Elefante"},
        {"emoji": "üîå", "nome": "Energia"},
        {"emoji": "üõ§", "nome": "Estrada"},        
    ],
    "F": [
        {"emoji": "üéó", "nome": "Fita"},
        {"emoji": "üå∏", "nome": "Flor"},
        {"emoji": "üêú", "nome": "Formiga"},
        {"emoji": "üî•", "nome": "Fogo"},
        {"emoji": "üé∫", "nome": "Flauta"},
        {"emoji": "üèÅ", "nome": "Final"},
        {"emoji": "üçÇ", "nome": "Folha"},
        {"emoji": "üöÄ", "nome": "Foguete"},
        {"emoji": "üåπ", "nome": "Flor"}
    ],
    "G": [
        {"emoji": "üê¨", "nome": "Golfinho"},
        {"emoji": "üê±", "nome": "Gato"},
        {"emoji": "ü¶í", "nome": "Girafa"},
        {"emoji": "‚òÇÔ∏è", "nome": "Guarda-chuva"},
        {"emoji": "üé∏", "nome": "Guitarra"},
        {"emoji": "ü•Ö", "nome": "Gol"},
        {"emoji": "üèåÔ∏è", "nome": "Golfe"}
    ],
    "H": [
        {"emoji": "üè•", "nome": "Hospital"},
        {"emoji": "üöÅ", "nome": "Helic√≥ptero"},
        {"emoji": "üêπ", "nome": "Hamster"}
    ],
    "I": [
        {"emoji": "üèù", "nome": "Ilha"},
        {"emoji": "üí°", "nome": "Ideia"},
        {"emoji": "üì±", "nome": "Internet"},
        {"emoji": "üñº", "nome": "Imagem"}
    ],
    "J": [
        {"emoji": "üé∑", "nome": "Jazz"},
        {"emoji": "üöô", "nome": "Jipe"}
    ],
    "K": [
        {"emoji": "ü•ù", "nome": "Kiwi"},
        {"emoji": "ü§π", "nome": "Karat√™"},
        {"emoji": "ü•ã", "nome": "Kimono"}
    ],
    "L": [
        {"emoji": "üçã", "nome": "Lim√£o"},
        {"emoji": "üìö", "nome": "Livro"},
        {"emoji": "üí°", "nome": "L√¢mpada"},
        {"emoji": "ü¶Å", "nome": "Le√£o"},
        {"emoji": "üåô", "nome": "Lua"},
        {"emoji": "üçä", "nome": "Laranja"},
        {"emoji": "üèûÔ∏è", "nome": "Lago"},
        {"emoji": "üõ≥", "nome": "Lancha"}
    ],
    "M": [
        {"emoji": "üé∂", "nome": "M√∫sica"},
        {"emoji": "üé§", "nome": "Microfone"},
        {"emoji": "üçé", "nome": "Ma√ß√£"},
        {"emoji": "üêµ", "nome": "Macaco"},
        {"emoji": "üçà", "nome": "Mel√£o"},
        {"emoji": "üåä", "nome": "Mar"},
        {"emoji": "üèî", "nome": "Montanha"},
        {"emoji": "üó∫", "nome": "Mapa"},
        {"emoji": "‚úâÔ∏è", "nome": "Mensagem"},
        {"emoji": "üöá", "nome": "Metr√¥"},
        {"emoji": "ü¶á", "nome": "Morcego"},
        {"emoji": "üî®", "nome": "Machado"}
    ],
    "N": [
        {"emoji": "‚ùÑÔ∏è", "nome": "Neve"},
        {"emoji": "üö¢", "nome": "Navio"}
    ],
    "O": [
        {"emoji": "ü•ö", "nome": "Ovo"},
        {"emoji": "üè¢", "nome": "Oficina"},
        {"emoji": "üé®", "nome": "Obra de Arte"},
        {"emoji": "üöå", "nome": "√înibus"}
    ],
    "P": [
        {"emoji": "üê†", "nome": "Peixe"},
        {"emoji": "üçï", "nome": "Pizza"},
        {"emoji": "üêß", "nome": "Pinguim"},
        {"emoji": "üéÅ", "nome": "Presente"},
        {"emoji": "üö™", "nome": "Porta"},
        {"emoji": "üêô", "nome": "Polvo"},
        {"emoji": "üì¶", "nome": "Pacote"},
        {"emoji": "ü•û", "nome": "Panqueca"},
        {"emoji": "ü•ñ", "nome": "P√£o"}
    ],
    "Q": [
        {"emoji": "üëë", "nome": "Queijo"},
        {"emoji": "üÉè", "nome": "Quebra-cabe√ßa"},
        {"emoji": "üñº", "nome": "Quadro"}
    ],
    "R": [
        {"emoji": "ü¶ä", "nome": "Raposa"},
        {"emoji": "üìª", "nome": "R√°dio"},
        {"emoji": "ü¶è", "nome": "Rinoceronte"},
        {"emoji": "ü§ñ", "nome": "Robo"},
    ],
    "S": [
        {"emoji": "üö¶", "nome": "Sem√°foro"},
        {"emoji": "üåû", "nome": "Sol"},
        {"emoji": "ü•ó", "nome": "Salada"},
        {"emoji": "üîî", "nome": "Sino de Natal"}
    ],
    "T": [
        {"emoji": "üé©", "nome": "Teatro"},
        {"emoji": "üåÆ", "nome": "Taco"},
        {"emoji": "üöÜ", "nome": "Trem"},
        {"emoji": "üéπ", "nome": "Teclado"},
        {"emoji": "üé∫", "nome": "Trompete"},
        {"emoji": "üìû", "nome": "Telefone"},
        {"emoji": "üåç", "nome": "Terra"},
        {"emoji": "üèÜ", "nome": "Trof√©u"},
        {"emoji": "ü•Å", "nome": "Tambor"}
    ],
    "U": [
        {"emoji": "ü¶Ñ", "nome": "Unic√≥rnio"},
        {"emoji": "üçá", "nome": "Uva"}
    ],
    "V": [
        {"emoji": "üéª", "nome": "Violino"},
        {"emoji": "üåã", "nome": "Vulc√£o"},
        {"emoji": "üç∑", "nome": "Vinho"},
        {"emoji": "üéÆ", "nome": "Videogame"},
        {"emoji": "üìπ", "nome": "V√≠deo"},
        {"emoji": "üöê", "nome": "Van"},
        {"emoji": "üîä", "nome": "Volume"}        
    ],
    "X": [
        {"emoji": "‚ùå", "nome": "Xis"}
    ],
    "Z": [
        {"emoji": "ü¶ì", "nome": "Zebra"}
    ]
};

        let currentGame = null;
        let speechSynth = window.speechSynthesis;

        function startGame(mode) {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            document.getElementById('feedback').textContent = '';
            currentGame = mode;

            if(mode === 'numbers') initNumbersGame();
            else if(mode === 'letters') initLettersGame();
            else if(mode === 'counting') initCountingGame();
            else if(mode === 'word') initWordGame();
        }

        function showMainMenu() {
            if(stars > previousStars) {
                speak(`${playerName}, voc√™ tem ${stars} estrelas! Muito bem!`); // Nome apenas aqui
                previousStars = stars;
            } else if(stars < previousStars && stars > 0) {
                speak(`${playerName}, agora voc√™ tem ${stars} estrelas. Vamos recuperar!`); // Nome apenas aqui
                previousStars = stars;
            }
            
            document.getElementById('main-menu').style.display = 'block';
            document.getElementById('game-area').style.display = 'none';
        }

        function initNumbersGame() {
            const content = document.getElementById('content');
            const targetNumber = numbers[Math.floor(Math.random() * 20)];
            
            content.innerHTML = `
                <h2>Encontre o n√∫mero:</h2>
                <div class="target-display">${targetNumber}</div>
                <div>Clique no n√∫mero igual ao mostrado acima</div>
            `;

            const options = shuffle([targetNumber, ...shuffle(numbers.filter(n => n !== targetNumber)).slice(0, 4)]);
            options.forEach(num => {
                const div = document.createElement('div');
                div.className = 'number-option';
                div.textContent = num;
                div.onclick = () => checkNumber(num === targetNumber);
                content.appendChild(div);
            });
            
            speak(`Encontre o n√∫mero ${targetNumber}`);
        }

        function initLettersGame() {
            const content = document.getElementById('content');
            const validLetters = Object.keys(emojiDatabase);
            const targetLetter = validLetters[Math.floor(Math.random() * validLetters.length)];
            const validEmojis = emojiDatabase[targetLetter];
            
            content.innerHTML = `
                <h2>Encontre emojis que come√ßam com:</h2>
                <div class="target-display">${targetLetter}</div>
                <div class="emoji-grid"></div>
            `;

            const grid = document.querySelector('.emoji-grid');
            const allEmojis = Object.values(emojiDatabase).flat();
            
            const correctOptions = shuffle([...validEmojis]).slice(0, 3);
            const incorrectOptions = shuffle(allEmojis.filter(e => !validEmojis.includes(e))).slice(0, 7);
            const mixedOptions = shuffle([...correctOptions, ...incorrectOptions]);

            mixedOptions.forEach(emojiObj => {
                const div = document.createElement('div');
                div.className = 'emoji-option';
                div.innerHTML = `
                    <div>${emojiObj.emoji}</div>
                    <div class="emoji-name">${emojiObj.nome}</div>
                `;
                div.onclick = () => checkEmoji(validEmojis.includes(emojiObj), emojiObj.nome);
                grid.appendChild(div);
            });

            speak(`Encontre coisas que come√ßam com a letra ${targetLetter}`);
        }

        function initCountingGame() {
            const content = document.getElementById('content');
            const targetCount = Math.floor(Math.random() * 20) + 1;
            const targetEmoji = shuffle(['üçé', '‚≠ê', 'üêª', 'üéà', 'üç™'])[0];
            
            content.innerHTML = `
                <h2>Conte at√©:</h2>
                <div class="target-display">${targetCount} ${targetEmoji}</div>
                <div id="counter">0</div>
                <div class="emoji-grid"></div>
            `;

            const grid = document.querySelector('.emoji-grid');
            const options = shuffle([targetEmoji, ...shuffle(['üê∂','üçâ','üöó','üéÆ','üçï','üèÄ','üê†','üç©','üöÇ','üåª']).slice(0, 9)]);
            
            options.forEach(emoji => {
                const div = document.createElement('div');
                div.className = 'emoji-option';
                div.textContent = emoji;
                div.onclick = () => handleCountClick(emoji === targetEmoji, targetCount);
                grid.appendChild(div);
            });

            speak(`Clique ${targetCount} vezes no ${getEmojiName(targetEmoji)}`);
        }

        function handleCountClick(isCorrect, target) {
            if(!isCorrect) {
                speak("Esse n√£o √© o emoji correto!");
                updateStars(-1);
                showFeedback('‚ùå Emoji errado!', false);
                return;
            }

            const counter = document.getElementById('counter');
            let count = parseInt(counter.textContent) + 1;
            counter.textContent = count;
            speak(count.toString());

            if(count === target) {
                updateStars(1);
                showFeedback('üéâ Parab√©ns! Contagem correta!', true);
                setTimeout(() => startGame('counting'), 2000);
            }
        }

        function checkNumber(isCorrect) {
            if(isCorrect) {
                updateStars(1);
                showFeedback('üéØ Correto! Voc√™ √© demais!', true);
                speak("Parab√©ns! N√∫mero correto!");
                setTimeout(() => startGame('numbers'), 2000);
            } else {
                updateStars(-1);
                showFeedback('ü§î Tente novamente!', false);
                speak("Ops! Esse n√£o √© o n√∫mero");
            }
        }

        function checkEmoji(isCorrect, nome) {
            if(isCorrect) {
                updateStars(1);
                showFeedback('üåà Certo! Combina√ß√£o perfeita!', true);
                speak(`Isso mesmo! ${nome} come√ßa com ${nome[0]}!`);
                setTimeout(() => startGame('letters'), 2000);
            } else {
                updateStars(-1);
                showFeedback(`üí° "${nome}" come√ßa com ${nome[0].toUpperCase()}!`, false);
                speak(`Ops! ${nome} come√ßa com ${nome[0].toUpperCase()}!`);
            }
        }

        function initWordGame() {
            const content = document.getElementById('content');
            content.innerHTML = '<h2>Monte a palavra do emoji:</h2>';

            // Seleciona um emoji aleat√≥rio
            const allEmojis = Object.values(emojiDatabase).flat();
            const randomEmoji = shuffle(allEmojis)[0];
            const originalName = randomEmoji.nome.toUpperCase();

            // Processa as letras mantendo acentos
            const targetLetters = Array.from(originalName).filter(c => c !== ' ' && c !== '-');

            // Cria a exibi√ß√£o do alvo
            let targetDisplay = '';
            targetLetters.forEach((letter, index) => {
                targetDisplay += `<span class="letter-box" id="target-letter-${index}">${letter}</span>`;
            });

            content.innerHTML += `
        <div class="word-target">
            ${randomEmoji.emoji} <div id="target-word">${targetDisplay}</div>
        </div>
        <div class="scrambled-letters" id="scrambled-letters"></div>
    `;

            // Prepara as letras embaralhadas (exatamente as da palavra)
            let scrambledLetters = shuffle([...targetLetters]);

            // Exibe as letras embaralhadas
            const lettersContainer = document.getElementById('scrambled-letters');
            scrambledLetters.forEach((letter) => {
                const div = document.createElement('div');
                div.className = 'word-letter';
                div.textContent = letter;
                div.onclick = function() {
                    handleLetterClick(this, targetLetters);
                };
                lettersContainer.appendChild(div);
            });

            speak(`Monte a palavra: ${randomEmoji.nome}`); // Usa o nome original com acentos
        }

        function handleLetterClick(letterElement, targetLetters) {
            const revealedLetters = document.querySelectorAll('#target-word .revealed');
            const nextIndex = revealedLetters.length;

            if(nextIndex < targetLetters.length) {
                const correctLetter = targetLetters[nextIndex];

                if(letterElement.textContent === correctLetter) {
                    // Revela a letra correta
                    document.getElementById(`target-letter-${nextIndex}`).classList.add('revealed');
                    // Esconde a letra clicada
                    letterElement.style.visibility = 'hidden';

                    // Verifica se completou
                    if(nextIndex === targetLetters.length - 1) {
                        showFeedback('üéâ Parab√©ns! Palavra correta!', true);
                        updateStars(1);
                        speak("Palavra correta! Muito bem!");
                        setTimeout(() => startGame('word'), 2000);
                    }
                } else {
                    showFeedback('üòä Tente novamente!', false);
                    speak("Essa n√£o √© a letra correta");
                }
            }
        }

        function updateStars(change) {
            const newStars = Math.max(0, stars + change);
            if(newStars !== stars) {
                stars = newStars;
                localStorage.setItem('stars', stars.toString());
                document.getElementById('stars-count').textContent = stars;
                
                if(change > 0) {
                    speak(`Parab√©ns! Agora voc√™ tem ${stars} estrelas!`);
                } else if(change < 0 && stars > 0) {
                    speak('N√£o desista! Continue tentando!');
                }
            }
        }

        function showFeedback(message, isCorrect) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.style.color = isCorrect ? '#2E7D32' : '#C62828';
        }

        function speak(text) {
            if(speechSynth.speaking) speechSynth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'pt-BR';
            utterance.rate = 0.9;
            speechSynth.speak(utterance);
        }

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function getEmojiName(emoji) {
            const names = {
                'üçé': 'ma√ß√£', '‚≠ê': 'estrela', 'üêª': 'urso',
                'üéà': 'bal√£o', 'üç™': 'biscoito', 'üê∂': 'cachorro',
                'üçâ': 'melancia', 'üöó': 'carro', 'üéÆ': 'videogame',
                'üçï': 'pizza', 'üèÄ': 'bola', 'üê†': 'peixe',
                'üç©': 'rosquinha', 'üöÇ': 'trem', 'üåª': 'girassol'
            };
            return names[emoji] || 'objeto';
        }
    </script>
</body>
</html>