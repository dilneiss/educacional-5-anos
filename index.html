<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo Educativo Infantil</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive;
            background-color: #FFF3E0;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
        }
        .game-mode {
            background-color: #81D4FA;
            border-radius: 20px;
            padding: 20px;
            margin: 15px;
            cursor: pointer;
            font-size: 28px;
            color: #000;
            transition: transform 0.2s;
        }
        .game-mode:hover {
            transform: scale(1.05);
        }
        .number-option, .emoji-option {
            background-color: #C8E6C9;
            width: 120px;
            height: 120px;
            margin: 10px;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border-radius: 15px;
            cursor: pointer;
            border: 3px solid #000;
        }
        .emoji-name {
            font-size: 14px;
            margin-top: 5px;
        }
        .target-display {
            font-size: 80px;
            margin: 20px;
            padding: 20px;
            background-color: #FFF9C4;
            border-radius: 15px;
            display: inline-block;
        }
        .feedback {
            font-size: 40px;
            margin: 20px;
            min-height: 60px;
        }
        .emoji-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .puzzle-emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(30px, 1fr));
            gap: 0;
            width: 100%;
            height: 100%;
            padding: 0;
            justify-content: center;
            align-content: center;
        }
        button {
            font-size: 24px;
            padding: 15px 30px;
            margin: 15px;
            border-radius: 15px;
            background-color: #4CAF50;
            border: none;
            color: white;
            cursor: pointer;
        }
        .stars-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .player-name {
            font-size: 24px;
            color: #2E7D32;
            font-weight: bold;
        }
        .word-letter {
            background-color: #FFD700;
            width: 60px;
            height: 60px;
            margin: 5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid #000;
        }

        .word-target {
            font-size: 40px;
            margin: 20px;
            color: #888;
            opacity: 0.7;
        }

        .word-container {
            min-height: 100px;
            margin: 20px;
        }

        .correct-word {
            color: #2E7D32 !important;
            opacity: 1 !important;
        }

        .letter-box {
            display: inline-block;
            width: 40px;
            height: 40px;
            margin: 5px;
            font-size: 24px;
            color: #666;
            border-bottom: 3px solid #999;
        }

        .revealed {
            color: #2E7D32 !important;
            border-bottom: 3px solid #2E7D32;
        }

        .scrambled-letters {
            margin: 20px;
        }

        /* Jogo das Sombras */
        .shadow-container {
            display: flex;
            justify-content: space-around;
            margin: 20px;
        }
        .shadow-item {
            width: 150px;
            height: 150px;
            margin: 10px;
            cursor: move;
            transition: transform 0.3s;
        }
        .shadow-slot {
            width: 150px;
            height: 150px;
            margin: 10px;
            background: #E0E0E0;
            border-radius: 15px;
        }
        .shadow-match {
            background: #C8E6C9 !important;
            border: 3px solid #4CAF50 !important;
        }

        .shadow-mismatch {
            background: #FFCDD2 !important;
            border: 3px solid #C62828 !important;
            animation: shake 0.5s;
        }

        .dragging {
            opacity: 0.5;
            transform: scale(0.9);
        }

        /* Classifica√ß√£o por Cores */
        .color-bin {
            width: 120px;
            height: 120px;
            margin: 10px;
            border: 3px dashed #000;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: white;
        }

        .color-bin span {
            font-size: 16px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
        }

        .color-item {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .color-item:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        /* Esta√ß√£o Meteorol√≥gica */
        .weather-card {
            background: #FFF;
            padding: 20px;
            margin: 20px;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            display: inline-block;
            width: 250px;
        }

        .weather-items {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .weather-item {
            font-size: 30px;
            padding: 10px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
            background: #F5F5F5;
        }

        /**
        Quebra-cabe√ßa
         */
        .numbers-container,
        .quantities-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px auto;
            max-width: 800px;
        }

        .puzzle-piece {
            width: 130px;
            height: 130px;
            font-size: 30px;
            margin: 5px;
            background: #FFB74D;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .number-piece {
            font-size: 36px;
            font-weight: bold;
            background: #81D4FA;
        }

        .emoji-piece {
            background: transparent !important;
            padding: 5px;
        }

        .emoji-cell {
            font-size: calc(-15px + 1.5vw); /* Tamanho din√¢mico */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2px !important;
            margin: 0;
        }

        .emoji-piece .emoji-grid {
            grid-auto-flow: dense;
            justify-items: center;
        }

        @media (max-width: 600px) {
            .puzzle-piece {
                width: 100px;
                height: 100px;
            }

            .emoji-cell {
                font-size: 20px;
            }
        }

        .puzzle-piece:hover {
            transform: scale(1.05);
        }

        .puzzle-piece.selected {
            border-color: #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .puzzle-piece.matched {
            background: #C8E6C9;
            cursor: default;
            border-color: #4CAF50;
        }

        .puzzle-piece.matched .emoji-cell {
            background: rgba(76, 175, 80, 0.1);
        }

        .puzzle-piece.wrong {
            animation: shake 0.5s;
            background: #FFCDD2;
        }

        .puzzle-piece.wrong .emoji-cell {
            background: rgba(244, 67, 54, 0.1);
        }

        counting-game .emoji-option {
            width: 100px;
            height: 100px;
            margin: 5px;
            font-size: 40px;
        }

        .counting-game .emoji-grid {
            gap: 10px;
            padding: 15px;
        }


        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üéÆ Vamos Aprender! üåà</h1>
        
        <div id="main-menu">
            <div class="game-mode" onclick="startGame('numbers')">üî¢ N√∫meros</div>
            <div class="game-mode" onclick="startGame('letters')">üî§ Letras</div>
            <div class="game-mode" onclick="startGame('counting')">üçé Contar</div>
            <div class="game-mode" onclick="startGame('word')">üß© Palavras</div>
            <div class="game-mode" onclick="startGame('shadows')">üé≠ Sombras</div>
            <div class="game-mode" onclick="startGame('puzzle')">üß© Quebra cabe√ßa N√∫meros</div>
            <div class="game-mode" onclick="startGame('colors')">üé® Cores</div>
            <div class="game-mode" onclick="startGame('weather')">‚òî Clima</div>
        </div>

        <div id="game-area" style="display: none;">
            <div id="content"></div>
            <div id="feedback" class="feedback"></div>
            <button onclick="showMainMenu()">Voltar ao Menu</button>
        </div>
    </div>

    <div class="stars-container" id="stars">
        <span class="player-name" id="player-name"></span>
        <div>‚≠ê <span id="stars-count">0</span></div>
    </div>

    <script>
        // Sistema de nome do jogador - Sempre pede ao recarregar
        localStorage.removeItem('playerName');
        localStorage.removeItem('stars');

        let playerName = prompt('Qual √© o seu nome?', 'Amiguinho').trim();
        document.getElementById('player-name').textContent = playerName;

        // Sistema de estrelas - Sempre come√ßa do zero
        let stars = 0;
        let previousStars = 0;
        document.getElementById('stars-count').textContent = stars;

        const numbers = Array.from({length: 20}, (_, i) => i + 1);
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        
        const emojiDatabase = {
    "A": [
        {"emoji": "‚úàÔ∏è", "nome": "Avi√£o"},
        {"emoji": "üå≥", "nome": "√Årvore"},
        {"emoji": "üé®", "nome": "Arte"},
        {"emoji": "üèπ", "nome": "Arco e Flecha"},
        {"emoji": "üêú", "nome": "Aranha"},
        {"emoji": "‚öì", "nome": "√Çncora"},
        {"emoji": "üé≠", "nome": "Ator"},
        {"emoji": "üöë", "nome": "Ambul√¢ncia"},
        {"emoji": "üåà", "nome": "Arco-√≠ris"},
        {"emoji": "üçö", "nome": "Arroz"}
    ],
    "B": [
        {"emoji": "üéà", "nome": "Bal√£o"},
        {"emoji": "üö≤", "nome": "Bicicleta"},
        {"emoji": "üçå", "nome": "Banana"},
        {"emoji": "üîã", "nome": "Bateria"},
        {"emoji": "üèÄ", "nome": "Basquete"},
        {"emoji": "üêù", "nome": "Abelha"},
        {"emoji": "üçü", "nome": "Batata Frita"},
        {"emoji": "‚öñ", "nome": "Balan√ßa"},
        {"emoji": "üçÜ", "nome": "Berinjela"},
        {"emoji": "‚öΩ", "nome": "Bola"}
    ],
    "C": [
        {"emoji": "üè°", "nome": "Casa"},
        {"emoji": "üè∞", "nome": "Castelo"},
        {"emoji": "üèôÔ∏è", "nome": "Cidade"},
        {"emoji": "üêç", "nome": "Cobra"},
        {"emoji": "üê∂", "nome": "Cachorro"},
        {"emoji": "‚òï", "nome": "Caf√©"},
        {"emoji": "üçµ", "nome": "Ch√°"},
        {"emoji": "üöó", "nome": "Carro"},
        {"emoji": "üé†", "nome": "Carrossel"},
        {"emoji": "ü¶å", "nome": "Cervo"},
        {"emoji": "ü•ï", "nome": "Cenoura"},
        {"emoji": "üîë", "nome": "Chave"},
        {"emoji": "ü¶â", "nome": "Coruja"},
        {"emoji": "üèÉ", "nome": "Corrida"}
    ],
    "D": [
        {"emoji": "üé≤", "nome": "Dado"},
        {"emoji": "üêâ", "nome": "Drag√£o"},
        {"emoji": "üíé", "nome": "Diamante"},
        {"emoji": "üéØ", "nome": "Dardo"},
        {"emoji": "üìÖ", "nome": "Data"},        
    ],
    "E": [
        {"emoji": "‚≠ê", "nome": "Estrela"},
        {"emoji": "üìß", "nome": "E-mail"},
        {"emoji": "üêò", "nome": "Elefante"},
        {"emoji": "üîå", "nome": "Energia"},
        {"emoji": "üõ§", "nome": "Estrada"},        
    ],
    "F": [
        {"emoji": "üéó", "nome": "Fita"},
        {"emoji": "üå∏", "nome": "Flor"},
        {"emoji": "üêú", "nome": "Formiga"},
        {"emoji": "üî•", "nome": "Fogo"},
        {"emoji": "üé∫", "nome": "Flauta"},
        {"emoji": "üèÅ", "nome": "Final"},
        {"emoji": "üçÇ", "nome": "Folha"},
        {"emoji": "üöÄ", "nome": "Foguete"},
        {"emoji": "üåπ", "nome": "Flor"}
    ],
    "G": [
        {"emoji": "üê¨", "nome": "Golfinho"},
        {"emoji": "üê±", "nome": "Gato"},
        {"emoji": "ü¶í", "nome": "Girafa"},
        {"emoji": "‚òÇÔ∏è", "nome": "Guarda-chuva"},
        {"emoji": "üé∏", "nome": "Guitarra"},
        {"emoji": "ü•Ö", "nome": "Gol"},
        {"emoji": "üèåÔ∏è", "nome": "Golfe"}
    ],
    "H": [
        {"emoji": "üè•", "nome": "Hospital"},
        {"emoji": "üöÅ", "nome": "Helic√≥ptero"},
        {"emoji": "üêπ", "nome": "Hamster"}
    ],
    "I": [
        {"emoji": "üèù", "nome": "Ilha"},
        {"emoji": "üí°", "nome": "Ideia"},
        {"emoji": "üì±", "nome": "Internet"},
        {"emoji": "üñº", "nome": "Imagem"}
    ],
    "J": [
        {"emoji": "üé∑", "nome": "Jazz"},
        {"emoji": "üöô", "nome": "Jipe"}
    ],
    "K": [
        {"emoji": "ü•ù", "nome": "Kiwi"},
        {"emoji": "ü§π", "nome": "Karat√™"},
        {"emoji": "ü•ã", "nome": "Kimono"}
    ],
    "L": [
        {"emoji": "üçã", "nome": "Lim√£o"},
        {"emoji": "üìö", "nome": "Livro"},
        {"emoji": "üí°", "nome": "L√¢mpada"},
        {"emoji": "ü¶Å", "nome": "Le√£o"},
        {"emoji": "üåô", "nome": "Lua"},
        {"emoji": "üçä", "nome": "Laranja"},
        {"emoji": "üèûÔ∏è", "nome": "Lago"},
        {"emoji": "üõ≥", "nome": "Lancha"}
    ],
    "M": [
        {"emoji": "üé∂", "nome": "M√∫sica"},
        {"emoji": "üé§", "nome": "Microfone"},
        {"emoji": "üçé", "nome": "Ma√ß√£"},
        {"emoji": "üêµ", "nome": "Macaco"},
        {"emoji": "üçà", "nome": "Mel√£o"},
        {"emoji": "üåä", "nome": "Mar"},
        {"emoji": "üèî", "nome": "Montanha"},
        {"emoji": "üó∫", "nome": "Mapa"},
        {"emoji": "‚úâÔ∏è", "nome": "Mensagem"},
        {"emoji": "üöá", "nome": "Metr√¥"},
        {"emoji": "ü¶á", "nome": "Morcego"},
        {"emoji": "üî®", "nome": "Machado"}
    ],
    "N": [
        {"emoji": "‚ùÑÔ∏è", "nome": "Neve"},
        {"emoji": "üö¢", "nome": "Navio"}
    ],
    "O": [
        {"emoji": "ü•ö", "nome": "Ovo"},
        {"emoji": "üè¢", "nome": "Oficina"},
        {"emoji": "üé®", "nome": "Obra de Arte"},
        {"emoji": "üöå", "nome": "√înibus"}
    ],
    "P": [
        {"emoji": "üê†", "nome": "Peixe"},
        {"emoji": "üçï", "nome": "Pizza"},
        {"emoji": "üêß", "nome": "Pinguim"},
        {"emoji": "üéÅ", "nome": "Presente"},
        {"emoji": "üö™", "nome": "Porta"},
        {"emoji": "üêô", "nome": "Polvo"},
        {"emoji": "üì¶", "nome": "Pacote"},
        {"emoji": "ü•û", "nome": "Panqueca"},
        {"emoji": "ü•ñ", "nome": "P√£o"}
    ],
    "Q": [
        {"emoji": "üëë", "nome": "Queijo"},
        {"emoji": "üÉè", "nome": "Quebra-cabe√ßa"},
        {"emoji": "üñº", "nome": "Quadro"}
    ],
    "R": [
        {"emoji": "ü¶ä", "nome": "Raposa"},
        {"emoji": "üìª", "nome": "R√°dio"},
        {"emoji": "ü¶è", "nome": "Rinoceronte"},
        {"emoji": "ü§ñ", "nome": "Robo"},
    ],
    "S": [
        {"emoji": "üö¶", "nome": "Sem√°foro"},
        {"emoji": "üåû", "nome": "Sol"},
        {"emoji": "ü•ó", "nome": "Salada"},
        {"emoji": "üîî", "nome": "Sino de Natal"}
    ],
    "T": [
        {"emoji": "üé©", "nome": "Teatro"},
        {"emoji": "üåÆ", "nome": "Taco"},
        {"emoji": "üöÜ", "nome": "Trem"},
        {"emoji": "üéπ", "nome": "Teclado"},
        {"emoji": "üé∫", "nome": "Trompete"},
        {"emoji": "üìû", "nome": "Telefone"},
        {"emoji": "üåç", "nome": "Terra"},
        {"emoji": "üèÜ", "nome": "Trof√©u"},
        {"emoji": "ü•Å", "nome": "Tambor"}
    ],
    "U": [
        {"emoji": "ü¶Ñ", "nome": "Unic√≥rnio"},
        {"emoji": "üçá", "nome": "Uva"}
    ],
    "V": [
        {"emoji": "üéª", "nome": "Violino"},
        {"emoji": "üåã", "nome": "Vulc√£o"},
        {"emoji": "üç∑", "nome": "Vinho"},
        {"emoji": "üéÆ", "nome": "Videogame"},
        {"emoji": "üìπ", "nome": "V√≠deo"},
        {"emoji": "üöê", "nome": "Van"},
        {"emoji": "üîä", "nome": "Volume"}        
    ],
    "X": [
        {"emoji": "‚ùå", "nome": "Xis"}
    ],
    "Z": [
        {"emoji": "ü¶ì", "nome": "Zebra"}
    ]
};

        let currentGame = null;
        let speechSynth = window.speechSynthesis;

        function startGame(mode) {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            document.getElementById('feedback').textContent = '';
            currentGame = mode;

            if(mode === 'numbers') initNumbersGame();
            else if(mode === 'letters') initLettersGame();
            else if(mode === 'counting') initCountingGame();
            else if(mode === 'word') initWordGame();
            else if(mode === 'shadows') initShadowGame();
            else if(mode === 'puzzle') initPuzzleGame();
            else if(mode === 'colors') initColorGame();
            else if(mode === 'weather') initWeatherGame();
        }

        function showMainMenu() {
            if(stars > previousStars) {
                speak(`${playerName}, voc√™ tem ${stars} estrelas! Muito bem!`); // Nome apenas aqui
                previousStars = stars;
            } else if(stars < previousStars && stars > 0) {
                speak(`${playerName}, agora voc√™ tem ${stars} estrelas. Vamos recuperar!`); // Nome apenas aqui
                previousStars = stars;
            }
            
            document.getElementById('main-menu').style.display = 'block';
            document.getElementById('game-area').style.display = 'none';
        }

        function initNumbersGame() {
            const content = document.getElementById('content');
            const targetNumber = numbers[Math.floor(Math.random() * 20)];
            
            content.innerHTML = `
                <h2>Encontre o n√∫mero:</h2>
                <div class="target-display">${targetNumber}</div>
                <div>Clique no n√∫mero igual ao mostrado acima</div>
            `;

            const options = shuffle([targetNumber, ...shuffle(numbers.filter(n => n !== targetNumber)).slice(0, 4)]);
            options.forEach(num => {
                const div = document.createElement('div');
                div.className = 'number-option';
                div.textContent = num;
                div.onclick = () => checkNumber(num === targetNumber);
                content.appendChild(div);
            });
            
            speak(`Encontre o n√∫mero ${targetNumber}`);
        }

        function initLettersGame() {
            const content = document.getElementById('content');
            const validLetters = Object.keys(emojiDatabase);
            const targetLetter = validLetters[Math.floor(Math.random() * validLetters.length)];
            const validEmojis = emojiDatabase[targetLetter];
            
            content.innerHTML = `
                <h2>Encontre emojis que come√ßam com:</h2>
                <div class="target-display">${targetLetter}</div>
                <div class="emoji-grid"></div>
            `;

            const grid = document.querySelector('.emoji-grid');
            const allEmojis = Object.values(emojiDatabase).flat();
            
            const correctOptions = shuffle([...validEmojis]).slice(0, 3);
            const incorrectOptions = shuffle(allEmojis.filter(e => !validEmojis.includes(e))).slice(0, 7);
            const mixedOptions = shuffle([...correctOptions, ...incorrectOptions]);

            mixedOptions.forEach(emojiObj => {
                const div = document.createElement('div');
                div.className = 'emoji-option';
                div.innerHTML = `
                    <div>${emojiObj.emoji}</div>
                    <div class="emoji-name">${emojiObj.nome}</div>
                `;
                div.onclick = () => checkEmoji(validEmojis.includes(emojiObj), emojiObj.nome);
                grid.appendChild(div);
            });

            speak(`Encontre coisas que come√ßam com a letra ${targetLetter}`);
        }

        function initCountingGame() {
            const content = document.getElementById('content');
            const targetCount = Math.floor(Math.random() * 20) + 1;
            const targetEmoji = shuffle(['üçé', '‚≠ê', 'üêª', 'üéà', 'üç™'])[0];

            content.innerHTML = `
                <div class="counting-game">
                    <h2>Conte at√©:</h2>
                    <div class="target-display">${targetCount} ${targetEmoji}</div>
                    <div id="counter">0</div>
                    <div class="emoji-grid"></div>
                </div>
            `;

            const grid = document.querySelector('.emoji-grid');
            const options = shuffle([targetEmoji, ...shuffle(['üê∂','üçâ','üöó','üéÆ','üçï','üèÄ','üê†','üç©','üöÇ','üåª']).slice(0, 9)]);
            
            options.forEach(emoji => {
                const div = document.createElement('div');
                div.className = 'emoji-option';
                div.textContent = emoji;
                div.onclick = () => handleCountClick(emoji === targetEmoji, targetCount);
                grid.appendChild(div);
            });

            speak(`Clique ${targetCount} vezes no ${getEmojiName(targetEmoji)}`);
        }

        function handleCountClick(isCorrect, target) {
            if(!isCorrect) {
                speak("Esse n√£o √© o emoji correto!");
                updateStars(-1);
                showFeedback('‚ùå Emoji errado!', false);
                return;
            }

            const counter = document.getElementById('counter');
            let count = parseInt(counter.textContent) + 1;
            counter.textContent = count;
            speak(count.toString());

            if(count === target) {
                updateStars(1);
                showFeedback('üéâ Parab√©ns! Contagem correta!', true);
                setTimeout(() => startGame('counting'), 2000);
            }
        }

        function checkNumber(isCorrect) {
            if(isCorrect) {
                updateStars(1);
                showFeedback('üéØ Correto! Voc√™ √© demais!', true);
                speak("Parab√©ns! N√∫mero correto!");
                setTimeout(() => startGame('numbers'), 2000);
            } else {
                updateStars(-1);
                showFeedback('ü§î Tente novamente!', false);
                speak("Ops! Esse n√£o √© o n√∫mero");
            }
        }

        function checkEmoji(isCorrect, nome) {
            if(isCorrect) {
                updateStars(1);
                showFeedback('üåà Certo! Combina√ß√£o perfeita!', true);
                speak(`Isso mesmo! ${nome} come√ßa com ${nome[0]}!`);
                setTimeout(() => startGame('letters'), 2000);
            } else {
                updateStars(-1);
                showFeedback(`üí° "${nome}" come√ßa com ${nome[0].toUpperCase()}!`, false);
                speak(`Ops! ${nome} come√ßa com ${nome[0].toUpperCase()}!`);
            }
        }

        function initWordGame() {
            const content = document.getElementById('content');
            content.innerHTML = '<h2>Monte a palavra do emoji:</h2>';

            // Seleciona um emoji aleat√≥rio
            const allEmojis = Object.values(emojiDatabase).flat();
            const randomEmoji = shuffle(allEmojis)[0];
            const originalName = randomEmoji.nome.toUpperCase();

            // Processa as letras mantendo acentos
            const targetLetters = Array.from(originalName).filter(c => c !== ' ' && c !== '-');

            // Cria a exibi√ß√£o do alvo
            let targetDisplay = '';
            targetLetters.forEach((letter, index) => {
                targetDisplay += `<span class="letter-box" id="target-letter-${index}">${letter}</span>`;
            });

            content.innerHTML += `
        <div class="word-target">
            ${randomEmoji.emoji} <div id="target-word">${targetDisplay}</div>
        </div>
        <div class="scrambled-letters" id="scrambled-letters"></div>
    `;

            // Prepara as letras embaralhadas (exatamente as da palavra)
            let scrambledLetters = shuffle([...targetLetters]);

            // Exibe as letras embaralhadas
            const lettersContainer = document.getElementById('scrambled-letters');
            scrambledLetters.forEach((letter) => {
                const div = document.createElement('div');
                div.className = 'word-letter';
                div.textContent = letter;
                div.onclick = function() {
                    handleLetterClick(this, targetLetters);
                };
                lettersContainer.appendChild(div);
            });

            speak(`Monte a palavra: ${randomEmoji.nome}`); // Usa o nome original com acentos
        }

        function handleLetterClick(letterElement, targetLetters) {
            const revealedLetters = document.querySelectorAll('#target-word .revealed');
            const nextIndex = revealedLetters.length;

            // Narra a letra clicada
            speak(letterElement.textContent);

            if(nextIndex < targetLetters.length) {
                const correctLetter = targetLetters[nextIndex];

                if(letterElement.textContent === correctLetter) {
                    // Revela a letra correta
                    document.getElementById(`target-letter-${nextIndex}`).classList.add('revealed');
                    // Esconde a letra clicada
                    letterElement.style.visibility = 'hidden';

                    // Verifica se completou
                    if(nextIndex === targetLetters.length - 1) {
                        showFeedback('üéâ Parab√©ns! Palavra correta!', true);
                        updateStars(1);
                        speak("Palavra correta! Muito bem!");
                        setTimeout(() => startGame('word'), 2000);
                    }
                } else {
                    showFeedback('üòä Tente novamente!', false);
                    speak("Essa n√£o √© a letra correta");
                }
            }
        }

        function initShadowGame() {
            const items = ['üê±', 'üöó', 'üè†', 'üçé'];
            const content = document.getElementById('content');
            content.innerHTML = '<h2>Arraste os itens para suas sombras:</h2>';

            // √Åreas de soltar primeiro
            content.innerHTML += '<div class="shadow-container">' +
                shuffle(items).map(item => `
            <div class="shadow-slot"
                 data-expected="${item}"
                 ondrop="dropShadow(event, '${item}')"
                 ondragover="allowDrop(event)">
                <div style="opacity:0.3; font-size:80px">${item}</div>
            </div>
        `).join('') + '</div>';

            // Itens arrast√°veis depois
            content.innerHTML += '<div class="shadow-container">' +
                shuffle(items).map(item => `
            <div class="shadow-item"
                 draggable="true"
                 ondragstart="startDrag(event, '${item}')"
                 ondragend="endDrag(event)">
                <div style="font-size: 80px">${item}</div>
            </div>
        `).join('') + '</div>';

            window.shadowGameState = {
                correctMatches: 0,
                totalItems: items.length
            };

            speak("Arraste os itens para suas figuras identicas");

        }

        let draggedItem = null;

        function startDrag(ev, emoji) {
            draggedItem = emoji;
            ev.target.classList.add('dragging');
            ev.dataTransfer.setData("text/plain", emoji);
        }

        function endDrag(ev) {
            ev.target.classList.remove('dragging');
        }

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function dropShadow(ev, expectedEmoji) {
            ev.preventDefault();
            const slot = ev.target.closest('.shadow-slot');

            if (draggedItem === expectedEmoji) {
                slot.innerHTML = `<div style="font-size:80px">${draggedItem}</div>`;
                slot.classList.add('shadow-match');
                slot.classList.remove('shadow-slot');
                window.shadowGameState.correctMatches++;

                if(window.shadowGameState.correctMatches === window.shadowGameState.totalItems) {
                    updateStars(1);
                    showFeedback('üéâ Parab√©ns! Todas sombras combinadas!', true);
                    setTimeout(() => startGame('shadows'), 2000);
                }
            } else {
                slot.classList.add('shadow-mismatch');
                setTimeout(() => slot.classList.remove('shadow-mismatch'), 1000);
            }

            draggedItem = null;
        }

        // Jogo 2: Quebra-Cabe√ßa Num√©rico
        function initPuzzleGame() {
            window.puzzleGameState = {
                selectedNumber: null,
                correctMatches: 0,
                totalPairs: 5
            };

            const content = document.getElementById('content');
            content.innerHTML = '<h2>Combine os n√∫meros com a quantidade correta:</h2>';

            // Gera n√∫meros aleat√≥rios de 1 a 10
            const numbers = shuffle([...Array(10)].map((_, i) => i + 1)).slice(0, 5);

            // Define os emojis dispon√≠veis
            const emojis = ['üçé', '‚≠ê', 'üéà', 'üê±', 'üöó', 'üéÆ', 'üçï', 'üê∂', 'üå∫', 'üé®'];

            // Container para os n√∫meros
            content.innerHTML += `
        <div class="numbers-container">
            ${numbers.map(num => `
                <div class="puzzle-piece number-piece"
                     onclick="selectNumber(this, ${num})"
                     data-number="${num}">
                    ${num}
                </div>
            `).join('')}
        </div>`;

            // Container para os grupos de emojis
            content.innerHTML += `
        <div class="quantities-container">
            ${shuffle(numbers).map(num => `
                <div class="puzzle-piece emoji-piece"
                     onclick="matchQuantity(this, ${num})"
                     data-number="${num}">
                    <div class="puzzle-emoji-grid">
                        ${Array(num).fill(emojis[num - 1]).map(emoji => `
                            <div class="emoji-cell">${emoji}</div>
                        `).join('')}
                    </div>
                </div>
            `).join('')}
        </div>`;

            speak(`Conte o n√∫mero de figuras e combine os n√∫meros com a quantidade correta de emojis`);

        }

        function selectNumber(element, number) {
            // Limpa sele√ß√£o anterior
            document.querySelectorAll('.number-piece').forEach(piece => {
                piece.classList.remove('selected');
            });

            // Seleciona o novo n√∫mero
            element.classList.add('selected');
            window.puzzleGameState.selectedNumber = number;
        }

        function matchQuantity(element, quantity) {
            if (window.puzzleGameState.selectedNumber === null) {
                showFeedback('Selecione um n√∫mero primeiro!', false);
                return;
            }

            if (quantity === window.puzzleGameState.selectedNumber) {
                // Par correto encontrado
                element.classList.add('matched');
                document.querySelector(`.number-piece[data-number="${quantity}"]`).classList.add('matched');
                window.puzzleGameState.correctMatches++;
                showFeedback('üéØ Combina√ß√£o correta!', true);

                // Verifica se completou todos os pares
                if (window.puzzleGameState.correctMatches === window.puzzleGameState.totalPairs) {
                    updateStars(1);
                    showFeedback('üéâ Parab√©ns! Voc√™ completou o quebra-cabe√ßa!', true);
                    setTimeout(() => startGame('puzzle'), 2000);
                }
            } else {
                showFeedback('‚ùå Tente novamente!', false);
                element.classList.add('wrong');
                setTimeout(() => {
                    element.classList.remove('wrong');
                }, 500);
            }

            // Limpa a sele√ß√£o ap√≥s cada tentativa
            window.puzzleGameState.selectedNumber = null;
            document.querySelectorAll('.number-piece').forEach(piece => {
                if (!piece.classList.contains('matched')) {
                    piece.classList.remove('selected');
                }
            });
        }

        // Jogo 3: Classifica√ß√£o por Cores
        function initColorGame() {
            // Array com v√°rias cores poss√≠veis
            const allColors = [
                { name: 'Vermelho', hex: '#FF0000' },
                { name: 'Azul', hex: '#0000FF' },
                { name: 'Verde', hex: '#00FF00' },
                { name: 'Amarelo', hex: '#FFD700' },
                { name: 'Roxo', hex: '#800080' },
                { name: 'Laranja', hex: '#FFA500' },
                { name: 'Rosa', hex: '#FF69B4' },
                { name: 'Marrom', hex: '#8B4513' }
            ];

            // Seleciona 3 cores aleat√≥rias para cada rodada
            const roundColors = shuffle(allColors).slice(0, 3);

            const content = document.getElementById('content');
            content.innerHTML = '<h2>Arraste as cores para as caixas corretas:</h2>';

            // Container para as bolas coloridas no topo
            content.innerHTML += `
        <div style="margin: 20px; display: flex; justify-content: center; gap: 15px;">
            ${roundColors.map(color => `
                <div class="color-item"
                     style="background:${color.hex}"
                     draggable="true"
                     ondragstart="dragColor(event, '${color.hex}')"
                     data-colorname="${color.name}">
                </div>
            `).join('')}
        </div>
    `;

            // Container para as caixas de classifica√ß√£o
            content.innerHTML += `
        <div style="margin-top:30px; display: flex; justify-content: center; gap: 20px;">
            ${roundColors.map(color => `
                <div class="color-bin"
                     style="border-color:${color.hex}"
                     ondrop="dropColor(event, '${color.hex}')"
                     ondragover="allowDrop(event)"
                     data-filled="false">
                     <span style="color: ${color.hex}">${color.name}</span>
                </div>
            `).join('')}
        </div>
    `;

            // Inicializa o estado do jogo
            window.colorGameState = {
                totalColors: roundColors.length,
                correctMatches: 0
            };

            speak(`Combine as cores acima nas caixas correspondentes`);

        }

        // Jogo 4: Esta√ß√£o Meteorol√≥gica
        function initWeatherGame() {
            const weatherData = [
                { icon: '‚òÄÔ∏è', correctItems: ['üï∂Ô∏è', 'üé©', 'üß¥'], title: 'Ensolarado' },
                { icon: 'üåßÔ∏è', correctItems: ['‚òÇÔ∏è', 'üß•', 'ü•æ'], title: 'Chuvoso' },
                { icon: '‚ùÑÔ∏è', correctItems: ['üß§', 'üß£', 'üéø'], title: 'Frio' }
            ];

            const content = document.getElementById('content');

            // Escolhe um clima aleat√≥rio
            const currentWeather = shuffle(weatherData)[0];

            // Cria todas as op√ß√µes poss√≠veis (corretas + incorretas)
            const incorrectItems = ['üé∏', 'üìò', 'üéà', 'üé™', 'üé≠', 'üé®'];
            const allItems = shuffle([...currentWeather.correctItems, ...shuffle(incorrectItems).slice(0, 3)]);

            content.innerHTML = `
        <h2>Escolha os itens para o clima:</h2>
        <div class="weather-card">
            <div style="font-size:60px">${currentWeather.icon}</div>
            <h3>${currentWeather.title}</h3>
            <div class="weather-items" id="weather-items">
                ${allItems.map(item => `
                    <div class="weather-item"
                         data-item="${item}"
                         onclick="handleWeatherItem(this, '${item}', '${currentWeather.icon}')">
                        ${item}
                    </div>
                `).join('')}
            </div>
        </div>
    `;

            // Adiciona contador de acertos ao estado global
            window.weatherGameState = {
                correctCount: 0,
                totalCorrect: currentWeather.correctItems.length,
                currentIcon: currentWeather.icon
            };

            speak(`Selecione as figuras que voc√™ usaria para o clima `+currentWeather.title);

        }

        function handleWeatherItem(element, item, correctIcon) {
            if (element.classList.contains('selected')) {
                return; // Impede selecionar o mesmo item duas vezes
            }

            const correctItems = {
                '‚òÄÔ∏è': ['üï∂Ô∏è', 'üé©', 'üß¥'],
                'üåßÔ∏è': ['‚òÇÔ∏è', 'üß•', 'ü•æ'],
                '‚ùÑÔ∏è': ['üß§', 'üß£', 'üéø']
            }[correctIcon];

            if (correctItems.includes(item)) {
                element.classList.add('selected');
                element.style.background = '#C8E6C9';
                element.style.transform = 'scale(1.1)';
                element.style.border = '2px solid #4CAF50';
                showFeedback('‚úîÔ∏è Item correto!', true);

                // Incrementa o contador de acertos
                window.weatherGameState.correctCount++;

                // Verifica se completou todos os itens corretos
                if (window.weatherGameState.correctCount === window.weatherGameState.totalCorrect) {
                    updateStars(1);
                    showFeedback('üéâ Parab√©ns! Voc√™ completou o desafio!', true);
                    setTimeout(() => startGame('weather'), 2000);
                }
            } else {
                element.style.background = '#FFCDD2';
                element.style.animation = 'shake 0.5s';
                showFeedback('‚ùå N√£o √© para este clima', false);
                speak("N√£o √© para este clima");
                setTimeout(() => {
                    element.style.background = '';
                    element.style.animation = '';
                }, 1000);
            }
        }

        // Fun√ß√µes de arrastar/soltar gen√©ricas
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.innerHTML);
        }

        let draggedColor = '';

        function dragColor(ev, color) {
            draggedColor = color;
            ev.dataTransfer.setData("text/plain", color);
            // Adiciona efeito visual durante o arrasto
            ev.target.style.opacity = '0.5';
        }

        function dropColor(ev, targetColor) {
            ev.preventDefault();
            // Restaura opacidade do item arrastado
            document.querySelectorAll('.color-item').forEach(item => item.style.opacity = '1');

            const bin = ev.target.closest('.color-bin');

            // Verifica se a caixa j√° est√° preenchida
            if (bin.getAttribute('data-filled') === 'true') {
                showFeedback('Esta caixa j√° est√° preenchida!', false);
                return;
            }

            if (draggedColor === targetColor) {
                bin.style.backgroundColor = draggedColor;
                bin.setAttribute('data-filled', 'true');
                window.colorGameState.correctMatches++;
                showFeedback('üåü Cor correta!', true);

                // Verifica se todas as cores foram corretamente classificadas
                if (window.colorGameState.correctMatches === window.colorGameState.totalColors) {
                    updateStars(1);
                    showFeedback('üéâ Parab√©ns! Voc√™ completou todas as cores!', true);

                    // Reinicia o jogo ap√≥s 2 segundos
                    setTimeout(() => {
                        startGame('colors');
                    }, 2000);
                }
            } else {
                showFeedback('üòä Tente outra cor', false);
                bin.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    bin.style.animation = '';
                }, 500);
            }
        }

        function checkWeatherItem(item, correctIcon) {
            const isValid = {
                'üï∂Ô∏è': '‚òÄÔ∏è', 'üé©': '‚òÄÔ∏è',
                '‚òÇÔ∏è': 'üåßÔ∏è', 'üß•': 'üåßÔ∏è',
                'üß§': '‚ùÑÔ∏è', 'üß£': '‚ùÑÔ∏è'
            }[item] === correctIcon;

            if(isValid) {
                showFeedback('üåà Combina√ß√£o perfeita!', true);
                updateStars(1);
            } else {
                showFeedback('üí° N√£o √© para esse clima', false);
            }
        }

        function updateStars(change) {
            const newStars = Math.max(0, stars + change);
            if(newStars !== stars) {
                stars = newStars;
                localStorage.setItem('stars', stars.toString());
                document.getElementById('stars-count').textContent = stars;
                
                if(change > 0) {
                    speak(`Muito bem!`);
                } else if(change < 0 && stars > 0) {
                    speak('N√£o desista! Continue tentando!');
                }
            }
        }

        function showFeedback(message, isCorrect) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.style.color = isCorrect ? '#2E7D32' : '#C62828';
        }

        function speak(text) {
            if(speechSynth.speaking) speechSynth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'pt-BR';
            utterance.rate = 0.9;
            speechSynth.speak(utterance);
        }

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function getEmojiName(emoji) {
            const names = {
                'üçé': 'ma√ß√£', '‚≠ê': 'estrela', 'üêª': 'urso',
                'üéà': 'bal√£o', 'üç™': 'biscoito', 'üê∂': 'cachorro',
                'üçâ': 'melancia', 'üöó': 'carro', 'üéÆ': 'videogame',
                'üçï': 'pizza', 'üèÄ': 'bola', 'üê†': 'peixe',
                'üç©': 'rosquinha', 'üöÇ': 'trem', 'üåª': 'girassol'
            };
            return names[emoji] || 'objeto';
        }
    </script>
</body>
</html>